(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () {
  function defineProperties(target, props) {
    for (var i = 0; i < props.length; i++) {
      var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if ("value" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);
    }
  }return function (Constructor, protoProps, staticProps) {
    if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;
  };
}();

var _get = function get(object, property, receiver) {
  if (object === null) object = Function.prototype;var desc = Object.getOwnPropertyDescriptor(object, property);if (desc === undefined) {
    var parent = Object.getPrototypeOf(object);if (parent === null) {
      return undefined;
    } else {
      return get(parent, property, receiver);
    }
  } else if ("value" in desc) {
    return desc.value;
  } else {
    var getter = desc.get;if (getter === undefined) {
      return undefined;
    }return getter.call(receiver);
  }
};

var _dEngine = require('2d-engine');

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _possibleConstructorReturn(self, call) {
  if (!self) {
    throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  }return call && ((typeof call === "undefined" ? "undefined" : _typeof(call)) === "object" || typeof call === "function") ? call : self;
}

function _inherits(subClass, superClass) {
  if (typeof superClass !== "function" && superClass !== null) {
    throw new TypeError("Super expression must either be null or a function, not " + (typeof superClass === "undefined" ? "undefined" : _typeof(superClass)));
  }subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } });if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;
}

var BOUNCE_ABSORPTION_BALL = .7;
var BOUNCE_ABSORPTION_WALL = 1.5;
var BALL_RADIUS_MIN = 25;
var BALL_RADIUS_MAX = 500;
var GRAVITY = 9.8;

var BallEntity = function (_BaseEntity) {
  _inherits(BallEntity, _BaseEntity);

  function BallEntity(options) {
    _classCallCheck(this, BallEntity);

    var _this = _possibleConstructorReturn(this, (BallEntity.__proto__ || Object.getPrototypeOf(BallEntity)).call(this, options));

    _this.heading = new _dEngine.Vector(Math.random(), Math.random());

    _this.radius = Math.random() * Math.max(BALL_RADIUS_MAX - BALL_RADIUS_MIN, 1) + BALL_RADIUS_MIN;
    return _this;
  }

  _createClass(BallEntity, [{
    key: 'startingPosition',
    value: function startingPosition() {
      return new _dEngine.Point(Math.floor(Math.random() * this.xMax), Math.floor(Math.random() * this.yMax));
    }
  }, {
    key: 'setScales',
    value: function setScales(engine) {
      _get(BallEntity.prototype.__proto__ || Object.getPrototypeOf(BallEntity.prototype), 'setScales', this).call(this, engine);

      this.pos = this.startingPosition();
    }
  }, {
    key: 'update',
    value: function update(delta) {
      var other;
      var tempVector;
      var magnitude;
      var pushDistance;
      var newX;
      var newY;

      for (var i = 0; i < this.entities.length; i++) {
        other = this.entities[i];

        tempVector = this.pos.minus(other.pos);
        magnitude = tempVector.magnitude();

        if (other !== this && magnitude < this.radius + other.radius) {
          pushDistance = tempVector.times((this.radius + other.radius - magnitude) / magnitude);

          this.pos.plusEquals(pushDistance);
          other.pos.x -= pushDistance.x;
          other.pos.y -= pushDistance.y;

          tempVector = this.heading.minus(other.heading);
          pushDistance.normalize();
          var dot = tempVector.dot(pushDistance);

          if (dot < 0) {
            this.heading.scalePlusEquals(-1 * BOUNCE_ABSORPTION_BALL * dot, pushDistance);
            other.heading.scalePlusEquals(BOUNCE_ABSORPTION_BALL * dot, pushDistance);
          }
        }
      }

      this.heading.y = this.heading.y + GRAVITY / delta;
      this.pos.plusEquals(this.heading);

      newX = this.pos.x;
      newY = this.pos.y;

      if (this.pos.x > this.xMax - this.radius) {
        this.pos.x = this.xMax - this.radius - (this.pos.x - (this.xMax - this.radius));
        this.heading.x *= -1 * BOUNCE_ABSORPTION_WALL;
      } else if (this.pos.x < this.radius) {
        this.pos.x = this.radius - (this.pos.x - this.radius);
        this.heading.x *= -1 * BOUNCE_ABSORPTION_WALL;
      }

      if (this.pos.y > this.yMax - this.radius) {
        this.pos.y = this.yMax - this.radius - (this.pos.y - (this.yMax - this.radius));
        this.heading.y *= -1 * BOUNCE_ABSORPTION_WALL;
      } else if (this.pos.y < this.radius) {
        this.pos.y = this.radius - (this.pos.y - this.radius);
        this.heading.y *= -1 * BOUNCE_ABSORPTION_WALL;
      }

      this.element.attr('transform', 'translate(' + this.xScale(this.pos.x) + ',' + this.yScale(this.pos.y) + ')');
    }
  }, {
    key: 'render',
    value: function render(canvas) {
      this.element = canvas.append('circle').attr('r', this.xScale(this.radius));
    }
  }]);

  return BallEntity;
}(_dEngine.BaseEntity);

exports.default = BallEntity;

},{"2d-engine":"2d-engine"}],2:[function(require,module,exports){
'use strict';

var _dEngine = require('2d-engine');

var _BallEntity = require('./BallEntity');

var _BallEntity2 = _interopRequireDefault(_BallEntity);

function _interopRequireDefault(obj) {
  return obj && obj.__esModule ? obj : { default: obj };
}

var STARTING_COUNT = 30;

var entity;
var engine = new _dEngine.Engine('.canvas', 800, 800, 10000, 10000);

for (var i = 0; i < STARTING_COUNT; i++) {
  entity = new _BallEntity2.default();
  entity.entities = engine.entities;

  engine.addEntity(entity);
}

engine.start();

},{"./BallEntity":1,"2d-engine":"2d-engine"}]},{},[2])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJkaXN0L2V4YW1wbGVzL2JvdW5jZS9CYWxsRW50aXR5LmpzIiwiZGlzdC9leGFtcGxlcy9ib3VuY2UvbWFpbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFFQSxJQUFNLHlCQUFOLEFBQStCO0FBQy9CLElBQU0seUJBQU4sQUFBK0I7QUFDL0IsSUFBTSxrQkFBTixBQUF3QjtBQUN4QixJQUFNLGtCQUFOLEFBQXdCO0FBQ3hCLElBQU0sVUFBTixBQUFnQjs7SSxBQUVLO3dCQUNuQjs7c0JBQUEsQUFBWSxTQUFTOzBCQUFBOzt3SEFBQSxBQUNiLEFBRU47O1VBQUEsQUFBSyxVQUFVLG9CQUNiLEtBRGEsQUFDYixBQUFLLFVBQ0wsS0FGRixBQUFlLEFBRWIsQUFBSyxBQUdQOztVQUFBLEFBQUssU0FBUyxLQUFBLEFBQUssV0FBWSxLQUFBLEFBQUssSUFBSSxrQkFBVCxBQUEyQixpQkFBNUMsQUFBaUIsQUFBNEMsS0FSeEQsQUFRbkIsQUFBaUY7V0FDbEY7Ozs7O3VDQUVrQixBQUNqQjthQUFPLG1CQUNMLEtBQUEsQUFBSyxNQUFNLEtBQUEsQUFBSyxXQUFXLEtBRHRCLEFBQ0wsQUFBZ0MsT0FDaEMsS0FBQSxBQUFLLE1BQU0sS0FBQSxBQUFLLFdBQVcsS0FGN0IsQUFBTyxBQUVMLEFBQWdDLEFBRW5DOzs7OzhCLEFBRVMsUUFBUSxBQUNoQjt3SEFBQSxBQUFnQixBQUVoQjs7V0FBQSxBQUFLLE1BQU0sS0FBWCxBQUFXLEFBQUssQUFDakI7Ozs7MkIsQUFFTSxPQUFPLEFBQ1o7VUFBQSxBQUFJLEFBQ0o7VUFBQSxBQUFJLEFBQ0o7VUFBQSxBQUFJLEFBQ0o7VUFBQSxBQUFJLEFBQ0o7VUFBQSxBQUFJLEFBQ0o7VUFBQSxBQUFJLEFBRUo7O1dBQUssSUFBSSxJQUFULEFB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Q0FBQSxBQUFDLElBQW5CLEFBQXVCLEFBQ3hCO0FBRUQ7O1dBQUEsQUFBSyxRQUFMLEFBQ0csS0FESCxBQUNRLGFBQWEsZUFBZSxLQUFBLEFBQUssT0FBTyxLQUFBLEFBQUssSUFBaEMsQUFBZSxBQUFxQixLQUFwQyxBQUF5QyxNQUFNLEtBQUEsQUFBSyxPQUFPLEtBQUEsQUFBSyxJQUFoRSxBQUErQyxBQUFxQixLQUR6RixBQUM4RixBQUMvRjs7OzsyQixBQUVNLFFBQVEsQUFDYjtXQUFBLEFBQUssVUFBVSxPQUFBLEFBQU8sT0FBUCxBQUFjLFVBQWQsQUFDWixLQURZLEFBQ1AsS0FBSyxLQUFBLEFBQUssT0FBTyxLQUR6QixBQUFlLEFBQ0YsQUFBaUIsQUFDL0I7Ozs7Ozs7a0IsQUF0RmtCOzs7OztBQ1JyQjs7QUFDQTs7Ozs7Ozs7QUFFQSxJQUFNLGlCQUFOLEFBQXVCOztBQUV2QixJQUFBLEFBQUk7QUFDSixJQUFJLFNBQVMsb0JBQUEsQUFDWCxXQURXLEFBRVgsS0FGVyxBQUVOLEtBRk0sQUFHWCxPQUhGLEFBQWEsQUFHSjs7QUFHVCxLQUFLLElBQUksSUFBVCxBQUFhLEdBQUcsSUFBaEIsQUFBb0IsZ0JBQXBCLEFBQW9DLEtBQUssQUFDdkM7V0FBUyxpQkFBVCxBQUNBO1NBQUEsQUFBTyxXQUFXLE9BQWxCLEFBQXlCLEFBRXpCOztTQUFBLEFBQU8sVUFBUCxBQUFpQixBQUNsQjs7O0FBRUQsT0FBQSxBQUFPIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImltcG9ydCB7UG9pbnQsIFZlY3RvciwgQmFzZUVudGl0eX0gZnJvbSAnMmQtZW5naW5lJztcblxuY29uc3QgQk9VTkNFX0FCU09SUFRJT05fQkFMTCA9IC43O1xuY29uc3QgQk9VTkNFX0FCU09SUFRJT05fV0FMTCA9IDEuNTtcbmNvbnN0IEJBTExfUkFESVVTX01JTiA9IDI1O1xuY29uc3QgQkFMTF9SQURJVVNfTUFYID0gNTAwO1xuY29uc3QgR1JBVklUWSA9IDkuODtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmFsbEVudGl0eSBleHRlbmRzIEJhc2VFbnRpdHkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgc3VwZXIob3B0aW9ucyk7XG5cbiAgICB0aGlzLmhlYWRpbmcgPSBuZXcgVmVjdG9yKFxuICAgICAgTWF0aC5yYW5kb20oKSxcbiAgICAgIE1hdGgucmFuZG9tKClcbiAgICApO1xuXG4gICAgdGhpcy5yYWRpdXMgPSBNYXRoLnJhbmRvbSgpICogKE1hdGgubWF4KEJBTExfUkFESVVTX01BWCAtIEJBTExfUkFESVVTX01JTiwgMSkpICsgQkFMTF9SQURJVVNfTUlOO1xuICB9XG5cbiAgc3RhcnRpbmdQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFBvaW50KFxuICAgICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdGhpcy54TWF4KSxcbiAgICAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRoaXMueU1heClcbiAgICApO1xuICB9XG5cbiAgc2V0U2NhbGVzKGVuZ2luZSkge1xuICAgIHN1cGVyLnNldFNjYWxlcyhlbmdpbmUpO1xuXG4gICAgdGhpcy5wb3MgPSB0aGlzLnN0YXJ0aW5nUG9zaXRpb24oKTtcbiAgfVxuXG4gIHVwZGF0ZShkZWx0YSkge1xuICAgIHZhciBvdGhlcjtcbiAgICB2YXIgdGVtcFZlY3RvcjtcbiAgICB2YXIgbWFnbml0dWRlO1xuICAgIHZhciBwdXNoRGlzdGFuY2U7XG4gICAgdmFyIG5ld1g7XG4gICAgdmFyIG5ld1k7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuZW50aXRpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG90aGVyID0gdGhpcy5lbnRpdGllc1tpXTtcblxuICAgICAgdGVtcFZlY3RvciA9IHRoaXMucG9zLm1pbnVzKG90aGVyLnBvcyk7XG4gICAgICBtYWduaXR1ZGUgPSB0ZW1wVmVjdG9yLm1hZ25pdHVkZSgpO1xuXG4gICAgICBpZiAob3RoZXIgIT09IHRoaXMgJiYgbWFnbml0dWRlIDwgKHRoaXMucmFkaXVzICsgb3RoZXIucmFkaXVzKSkge1xuICAgICAgICBwdXNoRGlzdGFuY2UgPSB0ZW1wVmVjdG9yLnRpbWVzKCh0aGlzLnJhZGl1cyArIG90aGVyLnJhZGl1cyAtIG1hZ25pdHVkZSkgLyBtYWduaXR1ZGUpO1xuXG4gICAgICAgIHRoaXMucG9zLnBsdXNFcXVhbHMocHVzaERpc3RhbmNlKTtcbiAgICAgICAgb3RoZXIucG9zLnggLT0gcHVzaERpc3RhbmNlLng7XG4gICAgICAgIG90aGVyLnBvcy55IC09IHB1c2hEaXN0YW5jZS55O1xuXG4gICAgICAgIHRlbXBWZWN0b3IgPSAodGhpcy5oZWFkaW5nLm1pbnVzKG90aGVyLmhlYWRpbmcpKTtcbiAgICAgICAgcHVzaERpc3RhbmNlLm5vcm1hbGl6ZSgpO1xuICAgICAgICB2YXIgZG90ID0gdGVtcFZlY3Rvci5kb3QocHVzaERpc3RhbmNlKTtcblxuICAgICAgICBpZiAoZG90IDwgMCkge1xuICAgICAgICAgIHRoaXMuaGVhZGluZy5zY2FsZVBsdXNFcXVhbHMoLTEgKiBCT1VOQ0VfQUJTT1JQVElPTl9CQUxMICogZG90LCBwdXNoRGlzdGFuY2UpO1xuICAgICAgICAgIG90aGVyLmhlYWRpbmcuc2NhbGVQbHVzRXF1YWxzKEJPVU5DRV9BQlNPUlBUSU9OX0JBTEwgKiBkb3QsIHB1c2hEaXN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmhlYWRpbmcueSA9IHRoaXMuaGVhZGluZy55ICsgKEdSQVZJVFkgLyBkZWx0YSk7XG4gICAgdGhpcy5wb3MucGx1c0VxdWFscyh0aGlzLmhlYWRpbmcpO1xuXG4gICAgbmV3WCA9IHRoaXMucG9zLng7XG4gICAgbmV3WSA9IHRoaXMucG9zLnk7XG5cbiAgICBpZiAodGhpcy5wb3MueCA+IHRoaXMueE1heCAtIHRoaXMucmFkaXVzKSB7XG4gICAgICB0aGlzLnBvcy54ID0gKHRoaXMueE1heCAtIHRoaXMucmFkaXVzKSAtICh0aGlzLnBvcy54IC0gKHRoaXMueE1heCAtIHRoaXMucmFkaXVzKSk7XG4gICAgICB0aGlzLmhlYWRpbmcueCAqPSAtMSAqIEJPVU5DRV9BQlNPUlBUSU9OX1dBTEw7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBvcy54IDwgdGhpcy5yYWRpdXMpIHtcbiAgICAgIHRoaXMucG9zLnggPSAoKHRoaXMucmFkaXVzKSAtICh0aGlzLnBvcy54IC0gdGhpcy5yYWRpdXMpKTtcbiAgICAgIHRoaXMuaGVhZGluZy54ICo9IC0xICogQk9VTkNFX0FCU09SUFRJT05fV0FMTDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wb3MueSA+IHRoaXMueU1heCAtIHRoaXMucmFkaXVzKSB7XG4gICAgICB0aGlzLnBvcy55ID0gKHRoaXMueU1heCAtIHRoaXMucmFkaXVzKSAtICh0aGlzLnBvcy55IC0gKHRoaXMueU1heCAtIHRoaXMucmFkaXVzKSk7XG4gICAgICB0aGlzLmhlYWRpbmcueSAqPSAtMSAqIEJPVU5DRV9BQlNPUlBUSU9OX1dBTEw7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBvcy55IDwgdGhpcy5yYWRpdXMpIHtcbiAgICAgIHRoaXMucG9zLnkgPSAoKHRoaXMucmFkaXVzKSAtICh0aGlzLnBvcy55IC0gdGhpcy5yYWRpdXMpKTtcbiAgICAgIHRoaXMuaGVhZGluZy55ICo9IC0xICogQk9VTkNFX0FCU09SUFRJT05fV0FMTDtcbiAgICB9XG5cbiAgICB0aGlzLmVsZW1lbnRcbiAgICAgIC5hdHRyKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0aGlzLnhTY2FsZSh0aGlzLnBvcy54KSArICcsJyArIHRoaXMueVNjYWxlKHRoaXMucG9zLnkpICsgJyknKTtcbiAgfVxuXG4gIHJlbmRlcihjYW52YXMpIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBjYW52YXMuYXBwZW5kKCdjaXJjbGUnKVxuICAgICAgLmF0dHIoJ3InLCB0aGlzLnhTY2FsZSh0aGlzLnJhZGl1cykpO1xuICB9XG59XG4iLCJpbXBvcnQge0VuZ2luZSwgQmFzZUVudGl0eX0gZnJvbSAnMmQtZW5naW5lJztcbmltcG9ydCBCYWxsRW50aXR5IGZyb20gJy4vQmFsbEVudGl0eSc7XG5cbmNvbnN0IFNUQVJUSU5HX0NPVU5UID0gMzA7XG5cbnZhciBlbnRpdHk7XG52YXIgZW5naW5lID0gbmV3IEVuZ2luZShcbiAgJy5jYW52YXMnLFxuICA4MDAsIDgwMCxcbiAgMTAwMDAsIDEwMDAwXG4pO1xuXG5mb3IgKHZhciBpID0gMDsgaSA8IFNUQVJUSU5HX0NPVU5UOyBpKyspIHtcbiAgZW50aXR5ID0gbmV3IEJhbGxFbnRpdHkoKTtcbiAgZW50aXR5LmVudGl0aWVzID0gZW5naW5lLmVudGl0aWVzO1xuXG4gIGVuZ2luZS5hZGRFbnRpdHkoZW50aXR5KTtcbn1cblxuZW5naW5lLnN0YXJ0KCk7XG4iXX0=
